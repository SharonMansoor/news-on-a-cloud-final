{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\Sharon\\\\Projects\\\\NewsOnACloud\\\\news-on-a-cloud\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\Sharon\\\\Projects\\\\NewsOnACloud\\\\news-on-a-cloud\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import Category from\"./Category\";import{Box,FormControl,InputLabel,Select,MenuItem,Grid}from\"@material-ui/core\";import{KeyboardDatePicker,MuiPickersUtilsProvider}from\"@material-ui/pickers\";import DateFnsUtils from\"@date-io/date-fns\";export default function NewsPreview(){var _React$useState=React.useState({loading:true,articles:null}),_React$useState2=_slicedToArray(_React$useState,2),appState=_React$useState2[0],setAppState=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),categoryFilter=_React$useState4[0],setCategoryFilter=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),dateFilter=_React$useState6[0],setDateFilter=_React$useState6[1];var _React$useState7=React.useState(appState.articles),_React$useState8=_slicedToArray(_React$useState7,2),newsDispalyed=_React$useState8[0],setNewsDisplayed=_React$useState8[1];React.useEffect(function(){setAppState({loading:true});var apiUrl=\"/articles\";fetch(apiUrl).then(function(res){return res.json();}).then(function(res){var result=res.reduce(function(r,a){r[a.category]=[].concat(_toConsumableArray(r[a.category]||[]),[a]);return r;},{});console.log(result);setNewsDisplayed(result);setAppState({loading:false,articles:result});});},[]);React.useEffect(function(){var result={};if(categoryFilter!==\"\"){result[categoryFilter]=appState.articles[categoryFilter];}else{result=appState.articles;}setNewsDisplayed(result);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[categoryFilter,dateFilter]);return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"#efefef\"}},/*#__PURE__*/React.createElement(Box,{px:4},appState.loading?\"loading\":/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"flex-end\",alignItems:\"flex-end\",spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(FormControl,{fullWidth:true,style:{marginBottom:\"8px\"}},/*#__PURE__*/React.createElement(InputLabel,{id:\"filterCategory\"},\"Category\"),/*#__PURE__*/React.createElement(Select,{fullWidth:true,labelId:\"filterCategory\",value:categoryFilter,onChange:function onChange(event){setCategoryFilter(event.target.value);}},/*#__PURE__*/React.createElement(MenuItem,{value:\"\"},/*#__PURE__*/React.createElement(\"em\",null,\"All\")),Object.keys(appState.articles).map(function(category){return/*#__PURE__*/React.createElement(MenuItem,{value:category},category);})))),/*#__PURE__*/React.createElement(Grid,{item:true,md:2},/*#__PURE__*/React.createElement(MuiPickersUtilsProvider,{utils:DateFnsUtils},/*#__PURE__*/React.createElement(KeyboardDatePicker,{disableToolbar:true,variant:\"inline\",format:\"dd/MM/yyyy\",margin:\"normal\",label:\"Date\",value:dateFilter,onChange:function onChange(date){setDateFilter(date);}})))),Object.keys(newsDispalyed).map(function(category){return/*#__PURE__*/React.createElement(Category,{name:category,articles:dateFilter?newsDispalyed[category].filter(function(article){var articleDate=new Date(article.time);return articleDate.getFullYear()===dateFilter.getFullYear()&&articleDate.getMonth()===dateFilter.getMonth()&&articleDate.getDate()===dateFilter.getDate();}):newsDispalyed[category]});}))));}","map":{"version":3,"sources":["C:/Users/Sharon/Projects/NewsOnACloud/news-on-a-cloud/src/components/NewsPreview.js"],"names":["React","Category","Box","FormControl","InputLabel","Select","MenuItem","Grid","KeyboardDatePicker","MuiPickersUtilsProvider","DateFnsUtils","NewsPreview","useState","loading","articles","appState","setAppState","categoryFilter","setCategoryFilter","dateFilter","setDateFilter","newsDispalyed","setNewsDisplayed","useEffect","apiUrl","fetch","then","res","json","result","reduce","r","a","category","console","log","backgroundColor","marginBottom","event","target","value","Object","keys","map","date","filter","article","articleDate","Date","time","getFullYear","getMonth","getDate"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Category from \"./Category\";\r\nimport {\r\n  Box,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  KeyboardDatePicker,\r\n  MuiPickersUtilsProvider,\r\n} from \"@material-ui/pickers\";\r\nimport DateFnsUtils from \"@date-io/date-fns\";\r\n\r\nexport default function NewsPreview() {\r\n  const [appState, setAppState] = React.useState({\r\n    loading: true,\r\n    articles: null,\r\n  });\r\n  const [categoryFilter, setCategoryFilter] = React.useState(\"\");\r\n  const [dateFilter, setDateFilter] = React.useState(null);\r\n  const [newsDispalyed, setNewsDisplayed] = React.useState(appState.articles);\r\n\r\n  React.useEffect(() => {\r\n    setAppState({ loading: true });\r\n    const apiUrl = `/articles`;\r\n    fetch(apiUrl)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        const result = res.reduce((r, a) => {\r\n          r[a.category] = [...(r[a.category] || []), a];\r\n          return r;\r\n        }, {});\r\n        console.log(result);\r\n        setNewsDisplayed(result);\r\n        setAppState({ loading: false, articles: result });\r\n      });\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    let result = {};\r\n    if (categoryFilter !== \"\") {\r\n      result[categoryFilter] = appState.articles[categoryFilter];\r\n    } else {\r\n      result = appState.articles;\r\n    }\r\n    setNewsDisplayed(result);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [categoryFilter, dateFilter]);\r\n\r\n  return (\r\n    <div style={{ backgroundColor: \"#efefef\" }}>\r\n      <Box px={4}>\r\n        {appState.loading ? (\r\n          \"loading\"\r\n        ) : (\r\n          <>\r\n            <Grid\r\n              container\r\n              justify=\"flex-end\"\r\n              alignItems=\"flex-end\"\r\n              spacing={2}\r\n            >\r\n              <Grid item md={2}>\r\n                <FormControl fullWidth style={{ marginBottom: \"8px\" }}>\r\n                  <InputLabel id=\"filterCategory\">Category</InputLabel>\r\n                  <Select\r\n                    fullWidth\r\n                    labelId=\"filterCategory\"\r\n                    value={categoryFilter}\r\n                    onChange={(event) => {\r\n                      setCategoryFilter(event.target.value);\r\n                    }}\r\n                  >\r\n                    <MenuItem value=\"\">\r\n                      <em>All</em>\r\n                    </MenuItem>\r\n                    {Object.keys(appState.articles).map((category) => (\r\n                      <MenuItem value={category}>{category}</MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item md={2}>\r\n                <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                  <KeyboardDatePicker\r\n                    disableToolbar\r\n                    variant=\"inline\"\r\n                    format=\"dd/MM/yyyy\"\r\n                    margin=\"normal\"\r\n                    label=\"Date\"\r\n                    value={dateFilter}\r\n                    onChange={(date) => {\r\n                      setDateFilter(date);\r\n                    }}\r\n                  />\r\n                </MuiPickersUtilsProvider>\r\n              </Grid>\r\n            </Grid>\r\n            {Object.keys(newsDispalyed).map((category) => (\r\n              <Category\r\n                name={category}\r\n                articles={\r\n                  dateFilter\r\n                    ? newsDispalyed[category].filter((article) => {\r\n                        var articleDate = new Date(article.time);\r\n                        return (\r\n                          articleDate.getFullYear() ===\r\n                            dateFilter.getFullYear() &&\r\n                          articleDate.getMonth() === dateFilter.getMonth() &&\r\n                          articleDate.getDate() === dateFilter.getDate()\r\n                        );\r\n                      })\r\n                    : newsDispalyed[category]\r\n                }\r\n              />\r\n            ))}\r\n          </>\r\n        )}\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}