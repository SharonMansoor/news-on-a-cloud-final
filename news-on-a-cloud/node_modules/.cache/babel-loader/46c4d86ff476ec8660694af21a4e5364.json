{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Sharon\\\\Projects\\\\NewsOnACloud\\\\news-on-a-cloud\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useForm,Controller}from\"react-hook-form\";import{TextField,Box,Grid,Fab,MenuItem,Select,FormControl,InputLabel,Typography}from\"@material-ui/core\";import Snackbar from'@material-ui/core/Snackbar';import MuiAlert from'@material-ui/lab/Alert';import AddIcon from\"@material-ui/icons/Add\";import AddCategory from\"./AddCategory\";function Alert(props){return/*#__PURE__*/React.createElement(MuiAlert,Object.assign({elevation:6,variant:\"filled\"},props));}export default function AddArticle(){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),loading=_React$useState2[0],setLoading=_React$useState2[1];var _React$useState3=React.useState(),_React$useState4=_slicedToArray(_React$useState3,2),categories=_React$useState4[0],setCategories=_React$useState4[1];var _useForm=useForm(),register=_useForm.register,control=_useForm.control,handleSubmit=_useForm.handleSubmit;var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),categoryAdded=_React$useState6[0],setCategoryAdded=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),openSuccessSnackBar=_React$useState8[0],setSuccessOpenSnackBar=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),openFailSnackBar=_React$useState10[0],setFailOpenSnackBar=_React$useState10[1];var handleSnackBarClose=function handleSnackBarClose(event,reason){if(reason==='clickaway'){return;}setSuccessOpenSnackBar(false);setFailOpenSnackBar(false);};var onSubmit=function onSubmit(data){console.log(data);var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)};fetch('/articles',requestOptions).then(function(response){return response.json();}).then(function(data){console.log(data);if(data.rowCount===1){setSuccessOpenSnackBar(true);}else{setFailOpenSnackBar(true);}}).catch(function(e){return setFailOpenSnackBar(true);});};React.useEffect(function(){var apiUrl=\"/category\";fetch(apiUrl).then(function(res){return res.json();}).then(function(res){console.log(res);setCategories(res);setCategoryAdded(false);setLoading(false);});},[categoryAdded]);function handleCategoryAdded(){setCategoryAdded(true);}return/*#__PURE__*/React.createElement(Box,{px:15,py:4},/*#__PURE__*/React.createElement(Typography,{variant:\"h5\",style:{marginBottom:\"10px\"}},\"Add a new Article\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},/*#__PURE__*/React.createElement(Grid,{container:true,spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true,md:6},/*#__PURE__*/React.createElement(TextField,{fullWidth:true,required:true,variant:\"outlined\",name:\"title\",label:\"Title\",inputRef:register})),/*#__PURE__*/React.createElement(Grid,{item:true,md:6}),/*#__PURE__*/React.createElement(Grid,{item:true,md:6},/*#__PURE__*/React.createElement(TextField,{fullWidth:true,required:true,variant:\"outlined\",name:\"writer\",label:\"Writer\",inputRef:register})),/*#__PURE__*/React.createElement(Grid,{item:true,md:6},loading?\"Loading\":/*#__PURE__*/React.createElement(FormControl,{variant:\"outlined\",fullWidth:true,required:true},/*#__PURE__*/React.createElement(InputLabel,{id:\"categoryLabel\"},\"Category\"),/*#__PURE__*/React.createElement(Controller,{as:/*#__PURE__*/React.createElement(Select,{id:\"category\",labelId:\"categoryLabel\",label:\"Catrgory\"},categories.map(function(category){return/*#__PURE__*/React.createElement(MenuItem,{value:category.id},category.name);})),control:control,name:\"category\"}))),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(AddCategory,{handleCategoryAdded:handleCategoryAdded})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(TextField,{fullWidth:true,required:true,variant:\"outlined\",multiline:true,rows:3,name:\"content\",label:\"Content\",inputRef:register})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(TextField,{fullWidth:true,required:true,variant:\"outlined\",multiline:true,rows:10,name:\"body\",label:\"Article Body\",inputRef:register})),/*#__PURE__*/React.createElement(Grid,{item:true,md:12},/*#__PURE__*/React.createElement(Fab,{type:\"submit\",color:\"primary\",\"aria-label\":\"add\",style:{float:\"right\"}},/*#__PURE__*/React.createElement(AddIcon,null))))),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:openSuccessSnackBar,autoHideDuration:6000,onClose:handleSnackBarClose},/*#__PURE__*/React.createElement(Alert,{onClose:handleSnackBarClose,severity:\"success\"},\"Added article successfully\")),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:openFailSnackBar,autoHideDuration:6000,onClose:handleSnackBarClose},/*#__PURE__*/React.createElement(Alert,{onClose:handleSnackBarClose,severity:\"error\"},\"Somthing went wrong, Please try again\")));}","map":{"version":3,"sources":["C:/Users/Sharon/Projects/NewsOnACloud/news-on-a-cloud/src/components/AddArticle.js"],"names":["React","useForm","Controller","TextField","Box","Grid","Fab","MenuItem","Select","FormControl","InputLabel","Typography","Snackbar","MuiAlert","AddIcon","AddCategory","Alert","props","AddArticle","useState","loading","setLoading","categories","setCategories","register","control","handleSubmit","categoryAdded","setCategoryAdded","openSuccessSnackBar","setSuccessOpenSnackBar","openFailSnackBar","setFailOpenSnackBar","handleSnackBarClose","event","reason","onSubmit","data","console","log","requestOptions","method","headers","body","JSON","stringify","fetch","then","response","json","rowCount","catch","e","useEffect","apiUrl","res","handleCategoryAdded","marginBottom","map","category","id","name","float","vertical","horizontal"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport {\r\n  TextField,\r\n  Box,\r\n  Grid,\r\n  Fab,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport MuiAlert from '@material-ui/lab/Alert';\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport AddCategory from \"./AddCategory\";\r\n\r\nfunction Alert(props) {\r\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n}\r\n\r\nexport default function AddArticle() {\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [categories, setCategories] = React.useState();\r\n  const { register, control, handleSubmit } = useForm();\r\n  const [categoryAdded, setCategoryAdded] = React.useState(false);\r\n  const [openSuccessSnackBar, setSuccessOpenSnackBar] = React.useState(false);\r\n  const [openFailSnackBar, setFailOpenSnackBar] = React.useState(false);\r\n\r\n  const handleSnackBarClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n\r\n    setSuccessOpenSnackBar(false);\r\n    setFailOpenSnackBar(false);\r\n  };\r\n\r\n  const onSubmit = (data) => {\r\n    console.log(data);\r\n      const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data)\r\n    };\r\n    fetch('/articles', requestOptions)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          console.log(data);\r\n          if(data.rowCount === 1){\r\n            setSuccessOpenSnackBar(true);\r\n          }else{\r\n            setFailOpenSnackBar(true);\r\n          }\r\n        })\r\n        .catch((e)=> setFailOpenSnackBar(true));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const apiUrl = `/category`;\r\n    fetch(apiUrl)\r\n      .then((res) => res.json())\r\n      .then((res) => {\r\n        console.log(res);\r\n        setCategories(res);\r\n        setCategoryAdded(false);\r\n        setLoading(false);\r\n      });\r\n  }, [categoryAdded]);\r\n\r\n  function handleCategoryAdded(){\r\n    setCategoryAdded(true);\r\n  }\r\n\r\n  return (\r\n    <Box px={15} py={4}>\r\n      <Typography variant=\"h5\" style={{ marginBottom: \"10px\" }}>\r\n        Add a new Article\r\n      </Typography>\r\n      <form onSubmit={handleSubmit(onSubmit)}>\r\n        <Grid container spacing={2}>\r\n          <Grid item md={6}>\r\n            <TextField\r\n              fullWidth\r\n              required\r\n              variant=\"outlined\"\r\n              name=\"title\"\r\n              label=\"Title\"\r\n              inputRef={register}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6} />\r\n          <Grid item md={6}>\r\n            <TextField\r\n              fullWidth\r\n              required\r\n              variant=\"outlined\"\r\n              name=\"writer\"\r\n              label=\"Writer\"\r\n              inputRef={register}\r\n            />\r\n          </Grid>\r\n          <Grid item md={6}>\r\n            {loading ? (\r\n              \"Loading\"\r\n            ) : (\r\n              <FormControl variant=\"outlined\" fullWidth required>\r\n                <InputLabel id=\"categoryLabel\">Category</InputLabel>\r\n                <Controller\r\n                  as={\r\n                    <Select                      \r\n                      id=\"category\"\r\n                      labelId=\"categoryLabel\"\r\n                      label=\"Catrgory\"\r\n                    >\r\n                      {categories.map((category) => (\r\n                        <MenuItem value={category.id}>{category.name}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  }\r\n                  control={control}\r\n                  name=\"category\"\r\n                />\r\n              </FormControl>\r\n            )}\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <AddCategory handleCategoryAdded={handleCategoryAdded}/>\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextField\r\n              fullWidth\r\n              required\r\n              variant=\"outlined\"\r\n              multiline\r\n              rows={3}\r\n              name=\"content\"\r\n              label=\"Content\"\r\n              inputRef={register}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <TextField\r\n              fullWidth\r\n              required\r\n              variant=\"outlined\"\r\n              multiline\r\n              rows={10}\r\n              name=\"body\"\r\n              label=\"Article Body\"\r\n              inputRef={register}\r\n            />\r\n          </Grid>\r\n          <Grid item md={12}>\r\n            <Fab\r\n              type=\"submit\"\r\n              color=\"primary\"\r\n              aria-label=\"add\"\r\n              style={{ float: \"right\" }}\r\n            >\r\n              <AddIcon />\r\n            </Fab>\r\n          </Grid>\r\n        </Grid>\r\n      </form>\r\n      <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"bottom\",\r\n            horizontal: \"center\",\r\n          }}\r\n          open={openSuccessSnackBar}\r\n          autoHideDuration={6000}\r\n          onClose={handleSnackBarClose}\r\n        >\r\n          <Alert onClose={handleSnackBarClose} severity=\"success\">\r\n            Added article successfully\r\n          </Alert>\r\n        </Snackbar>\r\n        <Snackbar\r\n          anchorOrigin={{\r\n            vertical: \"bottom\",\r\n            horizontal: \"center\",\r\n          }}\r\n          open={openFailSnackBar}\r\n          autoHideDuration={6000}\r\n          onClose={handleSnackBarClose}\r\n        >\r\n          <Alert onClose={handleSnackBarClose} severity=\"error\">\r\n            Somthing went wrong, Please try again\r\n          </Alert>\r\n        </Snackbar>\r\n    </Box>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}